MenuScreen:


<MenuScreen>:
    on_pre_enter: root.reset_game_won()
    Button:
        text: "FIGHT ! "
        on_press: root.manager.current = 'combat'


<FightScreen>:
    MainWidget:

<GameOverScreen>:
    on_pre_enter: root.game_over_sound.play(), root.reset_game_over()
    on_leave: root.game_over_sound.stop()
    RelativeLayout:
        Label:
            text: "GAME OVER"
            color: 1, 0, 0
            font_size: dp(100)
            font_name: "fonts/Dragon_Fire.otf"
        Button:
            size_hint: 0.2, 0.1
            pos_hint: {'center_x': 0.5, 'center_y': 0.3}
            text: "TRY AGAIN"
            on_release: root.manager.current = 'menu'

<MainWidget>:
    BoxLayout:
        orientation : "vertical"
        BoxLayout:
            size_hint: 1, 0.1
            ProgressBar:
        RelativeLayout:
            Image:
                id: Ennemy_img
                source: root.Ennemy_img
            Image:
                id: Effect_spell
                source: root.Effect_img
        ProgressBar:
            size_hint: (root.monster_hp - root.monster_hp_lost) / root.monster_hp, 0.1
            canvas:
                BorderImage:
                    border: (12, 12, 12, 12)
                    pos: self.x, self.center_y - 12
                    size: self.width, 24
                    source: 'images/red.png'
        BoxLayout:
            orientation: "horizontal"
            MenuFull:
            PlayerInfo:
                orientation : "horizontal"
                Image:
                    source : 'images/mage.png'
                BoxLayout:
                    orientation: "vertical"
                    Label :
                        text : "NAME"
                    Label :
                        text : "HP : "
                    ProgressBar:
                        size_hint: (root.hero_hp - root.hero_hp_lost) / root.hero_hp, 0.1
                        canvas:
                            BorderImage:
                                border: (12, 12, 12, 12)
                                pos: self.x, self.center_y - 12
                                size: self.width, 24
                                source: 'images/red.png'
                    Label :
                        text : " MP : "
                    ProgressBar:
                        size_hint: (root.hero_mp - root.hero_mp_lost) / root.hero_mp, 0.1
                        canvas:
                            BorderImage:
                                border: (12, 12, 12, 12)
                                pos: self.x, self.center_y - 12
                                size: self.width, 24
                                source: 'images/blue.png'
                    Label :
                        text : "LIMIT : "



<MenuFull>:
    do_default_tab: False
    TabbedPanelItem:
        text: "Attaque"
    TabbedPanelItem
        text: "Magic"
        MagicMenu:
    TabbedPanelItem
        text: "Objets"
        MagicMenu:
    TabbedPanelItem
        text: "Fuite"
        MagicMenu:


<MagicMenu>:
    orientation : "vertical"
    Button:
        text: "Fireball"
        on_press: self.parent.parent.parent.parent.parent.parent.on_spell_fire_pressed(), self.parent.parent.parent.parent.parent.parent.parent.check_game_end()
    Button:
        text: "Healing"
        on_press: self.parent.parent.parent.parent.parent.parent.on_spell_heal_pressed(), self.parent.parent.parent.parent.parent.parent.parent.check_game_end()
    Button:
        text: "tornado"
        on_press: self.parent.parent.parent.parent.parent.parent.on_spell_wind_pressed(), self.parent.parent.parent.parent.parent.parent.parent.check_game_end()